{"version":3,"sources":["components/ImgUploader/index.tsx","pages/Home.tsx","components/MovieForm/index.tsx","serveice/MovieService.ts","pages/movie/AddMovie.tsx","pages/movie/EditMovie.tsx","components/MovieTable/types.ts","public/logo192.png","components/MovieTable/index.tsx","redux/actions/MovieAction.ts","pages/movie/MovieList.tsx","pages/Layout.tsx","redux/reducers/MovieReducer.ts","redux/reducers/index.ts","redux/store.ts","App.tsx","index.tsx"],"names":["ImgUploader","this","props","curImgUrl","className","PlusOutlined","style","marginTop","uid","name","url","size","type","p","formdata","FormData","append","filename","file","request","Request","action","method","body","fetch","then","resp","json","console","log","err","message","error","onChange","data","accept","listType","fileList","getFileList","customRequest","handleRequest","bind","getUploaderContent","React","Component","Home","state","img","newImgUrl","setState","areaOptions","label","value","disabled","typeOptions","MovieForm","movie","formRef","createRef","infos","onSubmit","success","history","push","ref","layout","labelCol","span","wrapperCol","onFinish","handleFinish","onFinishFailed","handleFinishFaild","initialValues","Item","rules","required","placeholder","valuePropName","Group","options","max","min","htmlType","block","offset","withRouter","MovieService","axios","post","id","get","condition","params","put","delete","AddMovie","addMovie","res","handleSubmit","EditMovie","movieId","movieData","undefined","match","getMovie","editMovie","nextPorps","prevState","connect","SwitchType","store","dispatch","MovieTable","handleSearch","onSearch","title","dataIndex","render","poster","alt","src","defaultPosterSrc","onError","e","target","filterDropdown","getFilterDropDown","filterIcon","SearchOutlined","text","record","join","isHot","checked","newVal","onSwitchChange","_id","isClassic","isComing","to","onConfirm","a","onDelete","onCancel","info","okText","cancelText","danger","onLoad","movieCount","position","total","pageSize","limit","pagination","onTableChange","current","padding","width","marginBottom","display","key","onKeyChange","onPressEnter","icon","onClick","onClickCapture","dataSource","movies","columns","getColumns","rowKey","getPageConfig","handleTableChange","loading","isLoading","createSaveMovieAction","payload","createSetIsLoadingAction","createSetConditionAction","createDeleteMovieAction","createChangeSwitchAction","MovieAction","fetchMovies","getState","curCondition","getMovies","count","deleteMovie","changeSwitch","MovieList","movieState","page","newState","newPage","_Layout","mode","theme","defaultOpenKeys","defaultSelectedKeys","path","component","exact","defaultState","totalPage","saveMovie","Object","assign","Math","ceil","setCondition","setIsLoading","flag","filter","m","find","d","newMovie","newData","map","RootReducer","combineReducers","createStore","applyMiddleware","thunk","logger","App","Layout","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.93439b10.chunk.js","sourcesContent":["\nimport { PlusOutlined } from '@ant-design/icons';\nimport { message, Upload } from 'antd';\nimport { UploadFile } from 'antd/lib/upload/interface';\nimport React from 'react';\nimport './index.css';\n\n\ninterface IProps {\n    curImgUrl?: string;\n    onChange?: (newImgUrl: string) => void;\n}\nexport default class ImgUploader extends React.Component<IProps> {\n\n    private getUploaderContent() {\n        if (this.props.curImgUrl) {\n            return null;\n        }\n        return (\n            <div className=\"uploader-display\">\n                {/* {loading ? <LoadingOutlined /> : <PlusOutlined />} */}\n                <PlusOutlined />\n                <div style={{ marginTop: 8 }}>Upload</div>\n            </div>\n        );\n    }\n    private getFileList(): UploadFile[] {\n        if (this.props.curImgUrl) {\n            return [\n                {\n                    uid: this.props.curImgUrl,\n                    name: this.props.curImgUrl,\n                    url: this.props.curImgUrl,\n                    size: 0,\n                    type: ''\n                }\n            ]\n        }\n        return [];\n    }\n\n    // private handleChange(info: any) {\n    //     console.log(info);\n    // }\n    private async handleRequest(p: any) {\n        // console.log(p);\n        const formdata = new FormData();\n        formdata.append(p.filename, p.file);\n        const request = new Request(p.action, {\n            method: 'post',\n            body: formdata\n        })\n        const resp = await fetch(request).then(resp => resp.json());\n        console.log(resp);\n        if (resp.err) {\n            message.error('上传失败');\n        } else {\n            this.props.onChange && this.props.onChange(resp.data);\n        }\n    }\n\n    render() {\n        return (\n            <Upload\n                action=\"/api/upload\"\n                name=\"imgfile\"\n                accept=\".jpg,.png,.gif\"\n                listType=\"picture-card\"\n                fileList={this.getFileList()}\n                customRequest={this.handleRequest.bind(this)}\n            >\n                {this.getUploaderContent()}\n            </Upload>\n        );\n    }\n}","import React from 'react';\nimport ImgUploader from '../components/ImgUploader';\n\nexport default class Home extends React.Component {\n\n    state = {\n        img: ''\n    }\n    render() {\n        return (\n            <div>\n                <h1>欢迎使用电影管理系统</h1>\n                <ImgUploader\n                    curImgUrl={this.state.img}\n                    onChange={newImgUrl => {\n                        this.setState({\n                            img: newImgUrl\n                        })\n                    }}\n                ></ImgUploader>\n            </div>\n        )\n    }\n}","import { Button, Col, Form, FormInstance, Input, Row, Switch, Checkbox, InputNumber, message } from 'antd';\nimport TextArea from 'antd/lib/input/TextArea';\nimport React from 'react';\nimport { RouteComponentProps, withRouter } from 'react-router';\nimport { IMovie } from '../../serveice/MovieService';\nimport ImgUploader from '../ImgUploader';\nimport './index.css';\n\n\nconst areaOptions = [\n    { label: '中国大陆', value: '中国大陆' },\n    { label: '美国', value: '美国' },\n    { label: '英国', value: '英国' },\n    { label: '日本', value: '日本' },\n    { label: '韩国', value: '韩国', disabled: false },\n    { label: '其他', value: '其他', disabled: false },\n]\n\nconst typeOptions = [\n    { label: '喜剧', value: '喜剧' },\n    { label: '灾难', value: '灾难' },\n    { label: '爱情', value: '爱情' },\n    { label: '动画', value: '动画' },\n    { label: '动作', value: '动作', disabled: false },\n    { label: '其他', value: '其他', disabled: false },\n]\n\ninterface IProps extends RouteComponentProps {\n    onSubmit?: (movie: IMovie) => Promise<boolean>;\n    movie?: IMovie;\n}\n\ninterface IState {\n    movie: IMovie;\n}\n\n\nclass MovieForm extends React.Component<IProps, IState> {\n\n    state: IState = {\n        movie: {} as IMovie\n    }\n\n    constructor(props: IProps) {\n        super(props);\n        this.state.movie = props.movie!;\n    }\n\n    formRef = React.createRef<FormInstance>();\n\n    private handleFinishFaild(infos: any) {\n        console.log('finish faild', infos);\n    }\n\n    private async handleFinish(value: IMovie) {\n        console.log('finish', value);\n        if (this.props.onSubmit) {\n            const status = await this.props.onSubmit(value);\n            if (status) {\n                message.success(\"处理成功\", 3, () => {\n                    this.props.history.push('/movie');\n                });\n            } else {\n                message.success(\"提交失败\", 3);\n            }\n        }\n    }\n    componentDidMount() {\n        console.log(this.props);\n    }\n\n    render() {\n        return (\n            <Form\n                ref={this.formRef}\n                className=\"movie-form\"\n                layout=\"horizontal\"\n                labelCol={{ span: 6 }}\n                wrapperCol={{ span: 18 }}\n                onFinish={this.handleFinish.bind(this)}\n                onFinishFailed={this.handleFinishFaild.bind(this)}\n                initialValues={this.state.movie}\n            >\n                <Form.Item name=\"name\" label=\"电影名称\"\n                    rules={[\n                        { required: true, message: '电影名称必填' }\n                    ]}\n                >\n                    <Input placeholder=\"input placeholder\"></Input>\n                </Form.Item>\n                <Form.Item name=\"poster\" label=\"封面\" valuePropName=\"curImgUrl\">\n                    <ImgUploader></ImgUploader>\n                </Form.Item>\n                <Form.Item name=\"areas\" label=\"地区\"\n                    rules={[\n                        { required: true, message: '请选择地区' }\n                    ]}\n                >\n                    <Checkbox.Group\n                        options={areaOptions}\n                    >\n                    </Checkbox.Group>\n                </Form.Item>\n                <Form.Item name=\"types\" label=\"类型\"\n                    rules={[\n                        { required: true, message: '请选择电影类型' }\n                    ]}\n                >\n                    <Checkbox.Group\n                        options={typeOptions}\n                    >\n                    </Checkbox.Group>\n                </Form.Item>\n                <Form.Item name=\"timeLong\" label=\"时长\"\n                    rules={[\n                        { required: true, message: '请选择电影时长' }\n                    ]}\n                >\n                    <InputNumber type=\"number\" max={300} min={0}></InputNumber>\n                </Form.Item>\n                <Form.Item name=\"isHot\" label=\"是否热映\" valuePropName=\"checked\">\n                    <Switch></Switch>\n                </Form.Item>\n                <Form.Item name=\"isClassic\" label=\"是否经典影片\" valuePropName=\"checked\">\n                    <Switch></Switch>\n                </Form.Item>\n                <Form.Item name=\"isComing\" label=\"是否即将上映\" valuePropName=\"checked\">\n                    <Switch></Switch>\n                </Form.Item>\n                <Form.Item name=\"describe\" label=\"描述\">\n                    <TextArea></TextArea>\n                </Form.Item>\n                <Form.Item wrapperCol={{ span: 24 }}>\n                    <Row>\n                        <Col span={11}>\n                            <Button type=\"primary\" htmlType=\"submit\" block>submit</Button>\n                        </Col>\n                        <Col span={11} offset={2}>\n                            <Button type=\"primary\" htmlType=\"reset\" block>reset</Button>\n                        </Col>\n                    </Row>\n                </Form.Item>\n            </Form>\n        )\n    }\n}\n\n\nexport default withRouter(MovieForm);","import axios from 'axios';\n\nexport interface IMovie {\n    _id?: string;\n    name: string;\n    types: string[];\n    areas: string[];\n    timeLong: number;\n    isHot: boolean;\n    isComing: boolean;\n    isClassic: boolean;\n    description?: string;\n    poster?: string;\n}\n\nexport interface IResp<T> {\n    err: string,\n    data: T,\n}\n\nexport interface ISearchCondition {\n    page?: number;\n    limit?: number;\n    key?: string;\n}\n\nexport class MovieService {\n    public static async addMovie(movie: IMovie): Promise<IResp<IMovie>> {\n        const { data } = await axios.post(\"/api/movie\", movie)\n        // console.log(data);\n        return data;\n    }\n    // \"6008f2fc593890c1afe13925\"\n    public static async getMovie(id: string): Promise<IResp<IMovie>> {\n        const { data } = await axios.get(\"/api/movie/\" + id);\n        // console.log(data);\n        return data;\n    }\n    public static async getMovies(condition: ISearchCondition): Promise<{ data: IMovie[], count: number }> {\n        const { data } = await axios.get(\"/api/movie\", { params: condition });\n        // console.log(data);\n        return data.data;\n    }\n    //                                               所有属性全部非必选，因为不一定全部修改\n    public static async editMovie(id: string, movie: Partial<IMovie>): Promise<IResp<any>> {\n        const { data } = await axios.put(\"/api/movie/\" + id, movie);\n        // console.log(data);\n        return data;\n    }\n    public static async deleteMovie(id: string): Promise<IResp<any>> {\n        const { data } = await axios.delete(\"/api/movie/\" + id);\n        // console.log(data);\n        return data;\n    }\n}","import React from 'react';\nimport MovieForm from '../../components/MovieForm';\nimport { IMovie, MovieService } from '../../serveice/MovieService';\n\nexport default class AddMovie extends React.Component {\n\n    private async handleSubmit(movie: IMovie): Promise<boolean> {\n        const res = await MovieService.addMovie(movie);\n        if (res.err) {\n            console.log('添加失败', res);\n            return false;\n        }\n        return true;\n    }\n\n    render() {\n        return (\n            <h1>AddMovie\n                <MovieForm onSubmit={this.handleSubmit.bind(this)}></MovieForm>\n            </h1>\n        )\n    }\n}","import { message } from 'antd';\nimport React, { Dispatch } from 'react';\nimport { connect } from 'react-redux';\nimport { RouteComponentProps } from 'react-router';\nimport MovieForm from '../../components/MovieForm';\nimport { IRootState } from '../../redux/reducers';\nimport { IMovie, MovieService } from '../../serveice/MovieService';\n\ninterface IParams {\n    id: string;\n}\ninterface IProps extends RouteComponentProps<IParams> { }\n\ninterface IState {\n    movieId: string;\n    movieData: IMovie | undefined;\n}\n\nclass EditMovie extends React.Component<IProps, IState> {\n\n    state: IState = {\n        movieId: '',\n        movieData: undefined\n    }\n\n    async componentDidMount() {\n        const id = this.props.match.params.id;\n        const res = await MovieService.getMovie(id);\n\n        if (res.err) {\n            message.error('请求电影数据失败', 3);\n            this.setState({\n                movieData: undefined,\n                movieId: id\n            })\n            return;\n        }\n        this.setState({\n            movieData: res.data,\n            movieId: id\n        })\n        // MovieService.getMovie(id).then(res => {\n        //     if (res.err) {\n        //         throw new Error(res.err);\n        //     }\n        //     this.setState({\n        //         movieData: res.data\n        //     });\n        //     console.log('获取电影数据', res);\n        // }).catch(err => {\n        //     console.log('获取电影数据出错', err);\n        // });\n        // this.setState({\n        //     movieId: id\n        // });\n    }\n\n    static getDerivedStateFromProps(nextPorps: IProps, prevState: IState) {\n        console.log('getDrivedStateFromProps', nextPorps, prevState)\n        return null\n    }\n\n    private async handleSubmit(movie: IMovie): Promise<boolean> {\n        const res = await MovieService.editMovie(this.state.movieId, movie);\n        if (res.err) {\n            console.log('修改失败', res);\n            return false;\n        }\n        return true;\n    }\n\n\n    render() {\n        return (\n            <div>\n                <h1>EditMovie {this.props.match.params.id}\n                </h1>\n                {\n                    this.state.movieData ? <MovieForm\n                        movie={this.state.movieData}\n                        onSubmit={this.handleSubmit.bind(this)}\n                    ></MovieForm> : '加载中'\n                }\n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(store: IRootState) {\n    return {};\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch<any>) {\n    return {};\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditMovie);","\nexport enum SwitchType {\n    isHot = 'isHot',\n    isComing = 'isComing',\n    isClassic = 'isClassic'\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAMAAABlApw1AAAAh1BMVEUAAABk2vth2vxh2/xh2vxh2/xh2vth2/xh2vth2vxh2/xh2vxh2vxh2/xh2vxh2vxh2vth2vth2vth2vxg2vth2vth2/th2vxh2vxh2vxh2vxh2vtg2vth2vth2/xh2vxh2/xh2vth2/xh2vth2vth2/th2vth2vtm6P9h3P5j3/9l4/9o6/9I1caUAAAAJ3RSTlMACPsj9g8s4NjrX5OArPGcRcDQTBwXbj9Y5bM0UWe5eXTKOqTFh4yMjSHNAAAT5ElEQVR42uxb6XKbMBAuAhtsLhs7PvAVx2nQwfs/Xy0s8SmVscgUt/2RzUwnAaTV3qvd7Y9v+IZv+IZv+IZv+IZv+Cp4LfzpRj/kHrefvwcmrj9C7Vl/PhWAxdtNTx9xnBwWvufA7Dj8craK0+MxzU+LlyeTALzrPKzoDXgQ5Zvll2jAPt5b8p5xqkBM0sUTKQDa3ZHXvCI3qJio6STdjIC6L/fHScRryiqit+JUzHfPogCIT4xWpAIQQjil4U9fvu5//FlJqLgurgwgFWWvzxECMOc1U0gBDfeCfAzcruMv3gVlOD12YnX8XDW61BqrjbrKfTdy+cFsLmjVtU8dD08AcCc4P2ngMwnBT4ctyJfjlJvH1zYACg5DUwDkMw51FdJxSGM2SaDbKSi4H7YSoo4P7Wug1UxWjQemAMgjobHULDzP59GE1590mXB6hB7d056osSGwoRZZUeZ5WhDK1EM6x5JhCXilRB2TxbuRfLRcvx4D6U3AURqsNAU2B2IujE855VG8WN7e+h+Mq3d0M6QIgH4U3jAQns2MF/7qzKUCQI+OSxzAZP9bVBukcprla88IyrNA7U/PWDYkAQdKlJKumwwMidAsNYMDodlGvrEjiDCOX2+TpZlJeYaJidlTrOCdKgadPm3fkLJLOSUEzG29OeRX1oywVkqTpHVY+OZDY7jg1XACGCvkIvLuxab1nPKWgqo++/IpPngLqSEiFiNzM4nc3mTAJ/L10AScNHuUn7ZImG6h4oRmUAPv+o4JAiOZ7+TD7jhDnmLG84YAIrnj3feRo1xACJzLtEa9+aBQn8ZNdWzhE3b7Jh+KAOz9MuG3vdMHbn4R1lAjmstn0kzLmhCwH4Gik0uiwDdDEbDmyklPza0tLb7Ao5L66EkTfylAlWAn+ZlLT1kAExrYiTJyP9BD2wMKQyiuxjjeGg/CN/mRm018NjgB8Y2N0gd5j70VGB7Qrb/LRNAqVTpSi52Kuhrcio837aRHx85X+i5tVCN0kgn9OxeJW7PPgjwpqY4UAa6d5etXzttTM/2bCPY/3GtThSYd7OCIMcQpW3ijoHX7UH9HloxgPGQ6BA+d8f4hxmstF+c/v/RauFJ+NISpDZVIsC+4B+U7AXXp9Vs3VeFyOxqYgJ3OFF2FDyRvHOfncd8L/0LcTGeyHJiAtagQBnqt2AsQwNZY5by1DhrJsDHFxv0WVMyQQNBXcGum8Iz/DQGwmYCb130x6bnu7b8g4Oq0JqYfbdzKVan/BwKIJMDtg0JKoEHNOhrBrwyjQsMbMZKJMw309Va0edFcvuppxDzzh3ajTLHmrcfGqY4BpE4u+D3/iht9GTqQEQQyZzqAM8cyCwx0NE6wdoBANnwqgZuDPv9F6pOsZuAy9G9SCSRzuNJ3a3F7+z3elka6osfYm2t1gmRuUFB1UahB5wmWE070fUxysXkkiA4HL47luSKgxMNBy1qoF3Q7IH3YUB0WUY3Jwu3j9aWBZlhI+9zIvLYDQjgc7tW38H79C9zIPgYlAK6F4E7cXcBugO/1d7BNGFF3Afk5d2IcAQ66o6igz/mKz1ATuAJjuwcb+NpbLwYnYM+Bv5t/gsCB4keuONatbcDFdwXi4bs0uJKJrkDgKTvp8IJe1BKH2l4vOQ9VWtzyG3rbj3pew2MYAJ+MvaU/lrDbyX/95dJbBwzqpaY8PLv6pEuLw8NZoOABr2lQsWivMGwSTSZZQIhUuYqQIMgmkyhrX1cLHB17oDaKAuyQIrjQ1g0B761RNj3FZREaVzAuOOcMwK8g8JpVYXHMk+l6+Rsdo9ARLgdo8XF5pVH9JX+2io9XztJby9UA1fjF3+oBKJRrWBYd49XM93SrZ1exZ/UHEIzoomnt7ZM0ygStqVDzGtVXQC1hzQZZlCb7hooNKsjDE7DMFHc+/ENeBKJhuvvgbkKkOGoRRJeVnysph8/o8XmFUOypqGZ7o89/BHK5FgatdIOmHL5BcwUdTBl7xHcCsJ86FipukPp1sOEtOIjltOB3Wcgq2zobEIIrEMZDbgnABv4+9RXqgZi/PJQZ5Q7G3bS3eC8v8c/TYbrZL2az2Xp9/Wex30wPr0mcp/NziG1YpwkJmpWH5R9SgObj/pJhmsQAeXRO65qjhVR6zsJDSY2GeE35XTIIozRLNyMnDW7mj3+GgvLfUGirEyQ85odDwCo0qG/ZWwNI5hpQ0pxwJYBgOs2PYePPQIU5CyK28dhBgmuucF9WVA8FAZho5hXT034sN89p3zETFB5Ut0dGw8UpLTLRBBR7kq06bjzQ8FXdORQCqmPAle/Jwvd0ok3VU2QwrjaSJri99PiLpNzew1RRGq0wVvGl459C+vuAop6WGKmPmh+ZvyAH7tszR/FEp1XLLSfIQ4BU0G2C0Yrex38NP2s+kXalldc35m0+tEag6tNfidTVt2mIv2n/RDVmWMPk1E8KaFeHlP9+epJeFOdqeWPFRQdVICeg9oCbl374U9864zSgepIN40UHCME9W/xOBTE1R1AyX/k/Rpkd6o+UoG7du84XMGJRfRYqEbqaxPSo52Lhcs8zRYGzCBdz8XkpL06+fKVPy7KlFr3MH3FT+2pujsQZ80h13jzxX8+8USXYgshfXCTI1/uwroxlvM7ytTbZ1W8zQ8qCu8st6qGNpVDreKgdQqL33utV63xSC4OEqp5snHOpXmwov9Sd8KSG01WNGjoErKpqbW+GX7oKMKT+qd6eBeaRNMbla0TFp0HBHJt1TWpg6opQWkw9HABzc1zqEO4Id0KAltBopE5jFUFrApcGZ4A7t2LatBCU4Eh1tHtUGFsE1CS32AC5PXeGUxCO1hlw+4f8Pdxuw/d82liQFQww4dfKEs4Y+2wKUylEZQ0H49sV58ZkWzi10EKH5mjb4BJu7jUrgyZ7bvLroIQHsaqNfC0pKOyKEKbxwjYhYITRzpmphFbGZFtyNweZt7dWuHNYMAg9yiSkBUZFCRnBjjUzmigGXbRzsgSqQSr6oQ5mjwxCe0pMtll8U17zx0xU1X2xH9oJb2AlED3aYcrvqOse3KpFgl8qPULt2nbNxugtkNkhSDNdS8Oe1v4wU0Aw5ef9eExEYUyMjjqTgwxCQNC5O9qAwcIHWQDdrT8pMUByU6sigJHWY1pZSL2YUYIo1kHBcl5XGiAocJYTbb0PRksQemnaCABqCy2rLfbf7Q140JvzXDiH/TxDsgSVIxinfsUPOH9HCR23easUDtdkA/n9Uz/Te+j8uvAe55iMof59tzVKOHsw2Qa2AdDOQqzroIDBWnQCirCDufKH5cGKE116MT8dtfdU5miNmBxGJLVzfRuQ6OBjhdfeq5sChR0BAwFWguhxKXlXOmR17ZDSdIElgpMWp6siBwYJ9P2Ra0XyqXOoEuoGnE1WZI3LdALDyBr650gTIB/HXKMqoHroTBkR1QXaZ9sxBSmNCZ1aDtkDvQu8tkZbCa3tsCXRpyyPux+uNoC5i4Dy3v95gF32GmixeFdSVw/Yzuigc5aT7QLgsEQAbXQAkijYE+Yg4n6TeZgHwkUYQy0PCMA8pe2IEIXdGmBOtIBtCJTusSpmCwDC6QZ4SlsEsO/+w7EvBgF9CzvI6EDyHxAAp9avr4RsBpdPr+8oje1q4DdM0twq1NEAj7+CHi1/dGfFr/bOdDttGIjCRZjF7EvYEpKwxpLs93++1ljwGYSRaUSXc5gfbRKwLVma0ejOndHOca2lqQyabddt4an2AJTnyRFMXuPeSAGjrzwySLYOsnaZ0WFhgikUFacvgxNmJlV8FzqIrWfpwNVzdIA9AS+Dt1EWl4SBhykraYcAYQ2vzFplisV2+BkA1lb3+OPNWXNIOE1ZhXiGvYlNwXZdfh2jNezonRNIKNx4y/oJDUnbhe4z7pZZLxR4UAzAfe70y+J0BVaXqZtaCe7hUuFr067IDhHRsDEOu3/F7W/Ic6OLZYQZySy6qcLaDBpuLctM2f1MQ7OlRKNupebEwra5KJ+hGwIB30qmaSw0r+0c9QyiqxLw1phumWasNQDHDeCc5CheBbAWCWtfYHJFvrRIWgf0gZeBHg+T4Hr7IY0Cj2b3GifAKoXt38da3IC2oJxHcl1QpQO1U8GkEurrm5raLrkSuhbJsGKvGUYzaqET2KrvSBBMXq994+P04oSMPit0wcL1DQq+stwwkhHRZKB97nhu+mSrGFokO1BIwVDyKs6HPodNjy7xZFYMs+akNh9o6wLACbMKOCdKkAxBKwkXG0PsBHd/zEaglQylTZtMBBZPdwnz5+0GPhkWVY8t+H+/SMH1I4FlQQ0AKKLoI/A63up5NZOYlpFUZ/egnfYTPJlqLxgrdjIEbEDU8pHmeb/ZU3Gses0t9YeQkSRQeTPAUW2DdRchnwy9iEW+2ku/bj7AjcDcGY2w9uPEh6pvs9kbVawuEVRc4Hz47aKOUjuQKh+gmd5EPk2QjO6K7iz9gPWOtGjmMeiEHePjR9shoYYE/P50DtHjzVbkmx9ZIbLC+id0QQ/fU9PGG2cGsQND+RDYFAUeIe6PWdWwQxmLtDXUUuWBr5gg5a04/UUFGikX/RmrGAsm6x+u8J2FfkRyALqwqgzJpr3IyCbM6Iajihg1gIKzK7NYfT1VPGZQfmHDUS7PgOSqyxDuIp3JnZGSOjp7j2JfKV0Eq7rVpgsUAhK76VwoFnwiO0Ss764UBRrKH/V0uo6S+Pz5Mu7iHZTpwub11AX4KnnLXbHoS+4dtb0Gv1LcBtxen7gqNH/oZHrYi9/HQYMQAXxw1Gr0+K5yHMO8BmOkstnIk7AjO2vylxuFrUjgiyAqeO0MXk5vbpWUJaywjUGDzRUvg89uT/EMBj5Rr4O7WXOsIiG0HSSdTeG6/76ZVHihJcFB4olCZjjUZPbeX4fpvOEJEJV6/Tea/1vEv51Cobj1wcNRvVG3M68uI8WGCr6lvSRkn9DfZXXe2a576qJeGkwfPVr9Pv2V1fCrGae+5VXeeSKlWgQK1MclJKqoYKGkTODAn7c+XX6YO9+szjnehrHUBVRvpRVxyH5n2hoP3urVSa1WOUmtNqnWN4Nla9XpB3xbqwI6uJKmAuV3288w1Jb9hSqiz0eIIXiLoNcLG41G85f8+i/s9QKhTNoGXy6i76uw2zIcYI/8dTAQF/v+EK5VhrduOOxKHbrquBSAy0frbY5Vtv5ouM4+RMHFPo5O3EzV3bcQmmp1m+KQPCO+2wvansTBaDvfHtlI1Qfm0CTpjqLe+vpoHHqRKaL4nZYb+r6UovG6P2QBjY87PO9ZTHjA4MuV+rLTHYWm7qWK7umEyjQ6FuFu2xnXK6dyGsoC4X2msxIMRcNqb8tV/2PUCHRM+44ai5znqsQqaIxe29NxvYadINzhOQsIQAX4kmcaqVXfOprlQElLFPG/uFOv1q7epmtFrH0Jkaktf7poQD85JYOON2neTOt9+kve31ut5Xg2y1AkbsGF1kaBmLcXARHC5bR7AbZDL/PSzoc2LTNJsIs9q0/B7cdAXPczgUvJocmc7jxhxUVGki3/lf7I6HYT6mgBNswRiwRtYZz9CESj4tlpR3qUMpMADgXJ6i4ujf+yDHCrHFUNIA8SbTPFPVS+WgaCkKHgtXAw79Z9Z7C7fEGhCmkegrI7jsoeTe9WtFsqWdzkNFNQCPsKjF2aB+FVhpQqdAWiTzh4N/0dwAcM2EHIs0bKU61FJ7MT/JFQaOqDRG5KEziZ8FpYAvNQhhRFnARqZGa+SDoo6zJuHlVfaF4CHqYkUjIdH+tdotW3VSgT6bViKmWDADPdpsi4pToqwWKwU0SW/ktUsRtwNwPunzoRvzflUC9FpMl3B/Cy3I5HRtJGlF6WuvDln+hARtI+9gBS9j/RgUFpbqSKkMMC8D91IO1BfguJc/m3dGBS0gphS+cRokmc+jtWqDw5lqS6+GwKdUv1APq+HDxqJV6VI2jvpbqgW9ZKUtP9r8QQQkkid3sTEULZ5nKcVMp1/mF3GoU50V9Bn4O4R6DL6U57L7JF9at1iXkcntqvdEQRcE0WZ6k6Un47sHLVH0N9lYb79bk5Kx7vxKvWsYBD7FHQLrVxFFvsn4KzQsXTi/L9TQ6vKECQtf8TmVhhbpghzpqhuTqapxual/wBChHndRW8JsiongSauZ3Fc+usmUCGmytHWHDWUYGmAX55EtQLdLqQWJhntjVT/x8mGKnWJGsWcSK19z09FhpkzU67jqSAmoTCXhzjouWQ2HXBDNo+LkJjWzjTmGVTKhqpOzTRPkgnalPiwoK1vNeZI/GAIbCav/mI41wLQxat4qOM+AoDAP3Vt4Dcql71kg43O5BzmD7Dl/sOk+K4LeAXj2KTsybEJwy1LaJtsWL6nB8IefU4LwotnhwQ5dcG2TSZeLE8/nUy7htqG8RCzppxH6i2H0zMp0ujJQ5/y8uRdkLHo/a01Vq1h6E8oxQJqfaV+460C3fb9v6r24y1ePihfIM492QZS5lIfcEO3L3dXGmvHyqYJMmpBoyyghveXVKIDUI4yjCVPdaRGylDg3qUQNFHICp/3SyExTzaFR+sGUiT4uldoOjz6LPJE7SrZXfuxUebCrmwAEjPPehSmTDPyFzsq984XJZJuGMF8SwUfrnIbVAyEcMW62ppQuGe430PEukksFeQB/Rg0mkcyr3qjK/RG36SKXEfk222XwfxgeOV/qsbjOJjBCrjeP8xaiwazV23M375jcqgXFIdf/Y/duv1cLuaUdDokUL1rEkNd9nDGeN/pvUoMz99+04Usv5TwpOf8pSnPOUpT3nKU/5r+QnL/zLKJKcZgAAAAABJRU5ErkJggg==\"","import { Button, Input, message, Popconfirm, Space, Switch, Table } from 'antd';\nimport { ColumnProps, TablePaginationConfig } from 'antd/lib/table';\nimport React from 'react';\nimport { IMovieState } from '../../redux/reducers/MovieReducer';\nimport { IMovie } from '../../serveice/MovieService';\nimport defaultPosterSrc from '../../public/logo192.png';\nimport './index.css';\nimport { SwitchType } from './types';\nimport { NavLink } from 'react-router-dom';\nimport { SearchOutlined } from '@ant-design/icons';\n\n\ninterface IProps extends IMovieState {\n    onLoad?: () => void;\n    onSwitchChange?: (type: SwitchType, newState: boolean, id: string) => void;\n    onDelete?: (id: string) => Promise<void>;\n    onTableChange?: (newPage: number) => void;\n    onKeyChange?: (key: string) => void;\n    onSearch?: () => void;\n}\n\nexport default class MovieTable extends React.Component<IProps> {\n    private getColumns(): ColumnProps<IMovie>[] {\n        return [\n            {\n                title: '封面',\n                dataIndex: 'poster',\n                render: poster => {\n                    function onError(e: any) {\n                        console.log('图片加载失败，重设为默认封面');\n                        e.target.src = defaultPosterSrc;\n                    }\n                    return <img alt=\"\" className=\"moviePoster\" src={poster || defaultPosterSrc} onError={onError}></ img>\n                }\n            },\n            {\n                title: '名称',\n                dataIndex: 'name',\n                filterDropdown: this.getFilterDropDown.bind(this),\n                filterIcon: <SearchOutlined />\n            },\n            {\n                title: '地区',\n                dataIndex: 'areas',\n                render: (text: string[], record) => {\n                    // console.log(text, record);\n                    return text.join(',')\n                }\n            },\n            {\n                title: '类型',\n                dataIndex: 'types',\n                render: (text: string[], record) => {\n                    // console.log(text, record);\n                    return text.join(',')\n                }\n            },\n            {\n                title: '时长',\n                dataIndex: 'timeLong',\n                render: (text: string[], record) => {\n                    // console.log(text, record);\n                    return text\n                }\n            },\n            {\n                title: '热映',\n                dataIndex: 'isHot',\n                render: (isHot, record) => {\n                    return (\n                        <Switch\n                            checked={isHot}\n                            onChange={newVal => {\n                                this.props.onSwitchChange && this.props.onSwitchChange(SwitchType.isHot, newVal, record._id!);\n                            }}\n                        ></Switch>\n                    )\n                }\n            },\n            {\n                title: '经典',\n                dataIndex: 'isClassic',\n                render: (isClassic, record) => {\n                    return (\n                        <Switch\n                            checked={isClassic}\n                            onChange={newVal => {\n                                this.props.onSwitchChange && this.props.onSwitchChange(SwitchType.isClassic, newVal, record._id!);\n                            }}\n                        ></Switch>\n                    )\n                }\n            },\n            {\n                title: '即将上映',\n                dataIndex: 'isComing',\n                render: (isComing, record) => {\n                    return (\n                        <Switch\n                            checked={isComing}\n                            onChange={newVal => {\n                                this.props.onSwitchChange && this.props.onSwitchChange(SwitchType.isComing, newVal, record._id!);\n                            }}\n                        ></Switch>\n                    )\n                }\n            },\n            {\n                title: '操作',\n                dataIndex: '_id',\n                render: (id: string) => {\n                    return (\n                        <>\n                            <NavLink to={'/movie/edit/' + id}>\n                                <Button type=\"primary\" size=\"small\">编辑</Button>\n                            </NavLink>\n                            <Popconfirm\n                                title=\"are you sure delete this movie?\"\n                                onConfirm={async () => {\n                                    if (this.props.onDelete) {\n                                        await this.props.onDelete(id);\n                                        message.success('删除成功');\n                                    }\n                                }}\n                                onCancel={() => {\n                                    message.info('已取消')\n                                }}\n                                okText=\"yes\"\n                                cancelText=\"no\"\n                            >\n                                <Button\n                                    danger\n                                    size=\"small\"\n                                >删除</Button>\n                            </Popconfirm>\n                        </>\n                    )\n                }\n            }\n        ]\n    }\n    componentDidMount() {\n        // console.log(this.props);\n        this.props.onLoad && this.props.onLoad();\n    }\n    private getPageConfig(): TablePaginationConfig | false {\n        if (this.props.movieCount === 0) {\n            return false;\n        }\n        return {\n            position: ['bottomCenter'],\n            total: this.props.movieCount,\n            pageSize: this.props.condition.limit\n        }\n    }\n    private handleTableChange(pagination: TablePaginationConfig) {\n        // console.log(pagination);\n        this.props.onTableChange && this.props.onTableChange(pagination.current!);\n    }\n    private handleSearch = () => {\n        this.props.onSearch && this.props.onSearch();\n    }\n    private getFilterDropDown(p: object) {\n        console.log(p);\n        return (\n            <div style={{ padding: 8 }}>\n                <Input\n                    style={{ width: 188, marginBottom: 8, display: 'block' }}\n                    value={this.props.condition.key}\n                    onChange={e => { this.props.onKeyChange && this.props.onKeyChange(e.target.value); }}\n                    onPressEnter={this.handleSearch}\n                />\n                <Space>\n                    <Button\n                        type=\"primary\"\n                        icon={<SearchOutlined />}\n                        size=\"small\"\n                        style={{ width: 90 }}\n                        onClick={this.handleSearch}\n                    >\n                        Search\n                    </Button>\n                    <Button\n                        size=\"small\"\n                        style={{ width: 90 }}\n                        onClickCapture={() => {\n                            if (this.props.onKeyChange && this.props.onSearch) {\n                                this.props.onKeyChange('');\n                                this.props.onSearch();\n                            }\n                        }}\n                    >\n                        Reset\n                    </Button>\n                    <Button\n                        type=\"link\"\n                        size=\"small\"\n                    >\n                        Filter\n                    </Button>\n                </Space>\n            </div>\n        );\n    }\n    render() {\n        return (\n            <Table\n                dataSource={this.props.movies}\n                columns={this.getColumns()}\n                rowKey=\"_id\"\n                pagination={this.getPageConfig()}\n                onChange={this.handleTableChange.bind(this)}\n                loading={this.props.isLoading}\n            ></Table>\n        )\n    }\n}","import { IMovie, ISearchCondition, MovieService } from \"../../serveice/MovieService\";\nimport { IAction } from \"./ActionTypes\";\nimport { ThunkAction } from \"redux-thunk\"\nimport { IRootState } from \"../reducers\";\nimport { SwitchType } from \"../../components/MovieTable/types\";\n\nexport type saveMovieActionType = IAction<'movie_save', {\n    movies: IMovie[],\n    total: number\n}>\nfunction createSaveMovieAction(movies: IMovie[], total: number): saveMovieActionType {\n    return {\n        type: \"movie_save\",\n        payload: {\n            movies,\n            total\n        }\n    }\n}\n\nexport type setIsLoadingActionType = IAction<'set_isLoading', boolean>\nfunction createSetIsLoadingAction(isLoading: boolean): setIsLoadingActionType {\n    return {\n        type: \"set_isLoading\",\n        payload: isLoading\n    }\n}\n\nexport type setConditionActionType = IAction<'set_condition', ISearchCondition>\nfunction createSetConditionAction(condition: ISearchCondition): setConditionActionType {\n    return {\n        type: \"set_condition\",\n        payload: condition\n    }\n}\n\nexport type deleteMovieActionType = IAction<'movie_detele', string>\nfunction createDeleteMovieAction(id: string): deleteMovieActionType {\n    return {\n        type: \"movie_detele\",\n        payload: id\n    }\n}\n\nexport type changeSwitchActionType = IAction<'movie_switch_change', {\n    type: SwitchType;\n    newVal: boolean;\n    id: string;\n}>\nfunction createChangeSwitchAction(type: SwitchType, newVal: boolean, id: string)\n    : changeSwitchActionType {\n    return {\n        type: 'movie_switch_change',\n        payload: {\n            type,\n            newVal,\n            id\n        }\n    }\n}\n\n// 根据条件获取电影数据\nfunction fetchMovies(condition: ISearchCondition)\n    //  返回值类型 ，整个redux的state，额外数据，电影actions\n    : ThunkAction<Promise<void>, IRootState, any, MovieActions> {\n    return async (dispatch, getState) => {\n        // 1、设置加载状态\n        dispatch(createSetIsLoadingAction(true));\n        // 2. 设置条件\n        dispatch(createSetConditionAction(condition));\n        // 3. 得到最终查询条件\n        const curCondition = getState().movie.condition;\n        // 4. 查询电影\n        const resp = await MovieService.getMovies(curCondition);\n        console.log(resp);\n        // 5. 更改仓库数据\n        dispatch(createSaveMovieAction(resp.data, resp.count))\n        // 6. 关闭加载状态\n        dispatch(createSetIsLoadingAction(false));\n    }\n}\n\n// 根据条件获取电影数据\nfunction deleteMovie(id: string)\n    //  返回值类型 ，整个redux的state，额外数据，电影actions\n    : ThunkAction<Promise<void>, IRootState, any, MovieActions> {\n    return async (dispatch, getState) => {\n        dispatch(createSetIsLoadingAction(true));\n\n        await MovieService.deleteMovie(id);\n\n        dispatch(createDeleteMovieAction(id));\n\n        dispatch(createSetIsLoadingAction(false));\n    }\n}\n\nfunction changeSwitch(type: SwitchType, newVal: boolean, id: string)\n    //  返回值类型 ，整个redux的state，额外数据，电影actions\n    : ThunkAction<Promise<void>, IRootState, any, MovieActions> {\n    return async (dispatch, getState) => {\n        // 1、设置加载状态\n        dispatch(createSetIsLoadingAction(true));\n        // 2. 改变本地数据\n        dispatch(createChangeSwitchAction(type, newVal, id));\n        // 3. 发送请求修改\n        const resp = await MovieService.editMovie(id, {\n            [type]: newVal\n        });\n        console.log('change switch result ',resp);\n        // 4. 如果出错改回原状态\n        // 5. 关闭加载状态\n        dispatch(createSetIsLoadingAction(false));\n    }\n}\n\n\nexport type MovieActions = setConditionActionType | setIsLoadingActionType | saveMovieActionType | deleteMovieActionType | changeSwitchActionType;\nconst MovieAction = {\n    createSaveMovieAction,\n    createDeleteMovieAction,\n    createSetIsLoadingAction,\n    createSetConditionAction,\n    createChangeSwitchAction,\n    fetchMovies,\n    deleteMovie,\n    changeSwitch\n}\nexport default MovieAction;","import React, { Dispatch } from 'react';\nimport { connect } from 'react-redux';\nimport MovieTable from '../../components/MovieTable';\nimport { SwitchType } from '../../components/MovieTable/types';\nimport MovieAction from '../../redux/actions/MovieAction';\nimport { IRootState } from '../../redux/reducers';\nimport { IMovieState } from '../../redux/reducers/MovieReducer';\n\ninterface IProps {\n    movieState: IMovieState;\n    onLoad: () => void;\n    onSwitchChange: (type: SwitchType, newState: boolean, id: string) => void;\n    onDelete: (id: string) => Promise<void>;\n    onTableChange?: (newPage: number) => void;\n    onKeyChange?: (key: string) => void;\n    onSearch?: () => void;\n}\nclass MovieList extends React.Component<IProps> {\n\n    componentDidMount() {\n        console.log(this.props);\n    }\n    render() {\n        return (\n            <div>\n                <h1>MovieList</h1>\n                <MovieTable\n                    {...this.props.movieState}\n                    onLoad={this.props.onLoad}\n                    onSwitchChange={this.props.onSwitchChange}\n                    onDelete={this.props.onDelete}\n                    onTableChange={this.props.onTableChange}\n                    onKeyChange={this.props.onKeyChange}\n                    onSearch={this.props.onSearch}\n                ></MovieTable>\n            </div>\n        )\n    }\n}\n\nfunction mapStateToProps(state: IRootState) {\n    return {\n        movieState: state.movie\n    }\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch<any>) {\n    return {\n        onLoad: () => {\n            dispatch(\n                MovieAction.fetchMovies({ page: 1, limit: 10, key: '' })\n            )\n        },\n        onSwitchChange: (type: SwitchType, newState: boolean, id: string) => {\n            dispatch(\n                MovieAction.changeSwitch(type, newState, id)\n            )\n        },\n        onDelete: async (id: string) => {\n            await dispatch(MovieAction.deleteMovie(id));\n        },\n        onTableChange: (newPage: number) => {\n            dispatch(\n                MovieAction.fetchMovies({\n                    page: newPage\n                })\n            );\n        },\n        onKeyChange: (key: string) => {\n            dispatch(\n                MovieAction.createSetConditionAction({key})\n            )\n        },\n        onSearch: () => {\n            dispatch(\n                MovieAction.fetchMovies({\n                    page: 1\n                })\n            )\n        }\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MovieList);\n\n","import Layout, { Content, Header } from 'antd/lib/layout/layout';\nimport Sider from 'antd/lib/layout/Sider';\nimport React from 'react';\nimport { NavLink, Route } from 'react-router-dom';\nimport Home from './Home';\nimport AddMovie from './movie/AddMovie';\nimport EditMovie from './movie/EditMovie';\nimport MovieList from './movie/MovieList';\nimport './Layout.css';\nimport MenuItem from 'antd/lib/menu/MenuItem';\nimport { Menu } from 'antd';\nimport SubMenu from 'antd/lib/menu/SubMenu';\n\nconst _Layout: React.FC = () => {\n    return (\n        <div className=\"container\">\n            <Layout className=\"layout\">\n                <Header className=\"header\">\n                    <NavLink to=\"/\">电影管理系统</NavLink>\n                </Header>\n                <Layout>\n                    <Sider>\n                        <Menu\n                            mode=\"inline\"\n                            theme=\"dark\"\n                            defaultOpenKeys={['movieMenu']}\n                            defaultSelectedKeys={['home']}\n                        >\n                            <MenuItem key=\"home\">\n                                <NavLink to=\"/\">首页</NavLink>\n                            </MenuItem>\n                            <SubMenu key=\"movieMenu\" title=\"电影管理\">\n                                <MenuItem key=\"movieList\">\n                                    <NavLink to=\"/movie\">电影列表</NavLink>\n                                </MenuItem>\n                                <MenuItem key=\"addMovie\">\n                                    <NavLink to=\"/movie/add\">添加电影</NavLink>\n                                </MenuItem>\n                                <MenuItem key=\"editMovie\">\n                                    <NavLink to=\"/movie/edit/ididididid\">修改电影</NavLink>\n                                </MenuItem>\n                            </SubMenu>\n                        </Menu>\n                    </Sider>\n                    <Content className=\"content\">\n                        <Route path=\"/\" component={Home} exact={true}></Route>\n                        <Route path=\"/movie\" component={MovieList} exact></Route>\n                        <Route path=\"/movie/add\" component={AddMovie}></Route>\n                        <Route path=\"/movie/edit/:id\" component={EditMovie}></Route>\n                    </Content>\n                </Layout>\n            </Layout>\n        </div>\n    )\n}\n\nexport default _Layout","import { IMovie, ISearchCondition } from \"../../serveice/MovieService\";\nimport { changeSwitchActionType, deleteMovieActionType, MovieActions, saveMovieActionType, setConditionActionType, setIsLoadingActionType } from \"../actions/MovieAction\";\nimport { IReducer } from './ReducerTypes';\n\nexport type IMovieCondition = Required<ISearchCondition>\n\nexport interface IMovieState {\n    movies: IMovie[],\n    condition: IMovieCondition,\n    movieCount: number,\n    isLoading: boolean,\n    totalPage: number\n}\n\nconst defaultState: IMovieState = {\n    movies: [],\n    condition: {\n        page: 1,\n        limit: 5,\n        key: ''\n    },\n    movieCount: 0,\n    isLoading: false,\n    totalPage: 0\n};\n\nexport default function MovieReducer(state: IMovieState = defaultState, action: MovieActions) {\n    switch (action.type) {\n        case \"movie_save\":\n            return saveMovie(state, action);\n        case \"movie_detele\":\n            return deleteMovie(state, action);\n        case \"set_condition\":\n            return setCondition(state, action);\n        case \"set_isLoading\":\n            return setIsLoading(state, action);\n        case \"movie_switch_change\":\n            return changeSwitch(state, action);\n        default:\n            return state;\n    }\n}\n\nconst saveMovie: IReducer<IMovieState, saveMovieActionType> = (prevState, action) => {\n    return Object.assign({}, prevState, {\n        movies: action.payload.movies,\n        movieCount: action.payload.total,\n        totalPage: Math.ceil(action.payload.total / prevState.condition.limit)\n    })\n}\n\nconst setCondition: IReducer<IMovieState, setConditionActionType> = (prevState, action) => {\n    const newState = {\n        ...prevState,\n        condition: {\n            ...prevState.condition,\n            ...action.payload\n        }\n    }\n    newState.totalPage = Math.ceil(newState.movieCount / newState.condition.limit);\n    return newState;\n}\n\nconst setIsLoading: IReducer<IMovieState, setIsLoadingActionType> = (prevState, action) => {\n    return {\n        ...prevState,\n        isLoading: action.payload\n    }\n}\n\nconst deleteMovie: IReducer<IMovieState, deleteMovieActionType> = (prevState, action) => {\n    let flag = false;\n    const movies = prevState.movies.filter(m => {\n        if (flag) return true;\n        flag = m._id === action.payload;\n        return !flag\n    });\n    return {\n        ...prevState,\n        movies: movies,\n        movieCount: flag ? prevState.movieCount - 1 : prevState.movieCount,\n        totalPage: Math.ceil(prevState.movieCount - 1 / prevState.condition.limit)\n    }\n}\n\nconst changeSwitch: IReducer<IMovieState, changeSwitchActionType> = (prevState, action) => {\n    const movie = prevState.movies.find(d => d._id === action.payload.id);\n    if (!movie) {\n        return prevState;\n    }\n    const newMovie = {...movie};\n    newMovie[action.payload.type] = action.payload.newVal;\n    const newData = prevState.movies.map(d => {\n        if (d._id === action.payload.id) {\n            return newMovie;\n        }\n        return d;\n    })\n    return {\n        ...prevState,\n        movies: newData\n    }\n}\n\n","import { combineReducers } from \"redux\";\nimport MovieReducer, { IMovieState } from \"./MovieReducer\";\n\nexport interface IRootState {\n    movie: IMovieState\n}\n\nexport const RootReducer = combineReducers({\n    movie: MovieReducer\n})","import { applyMiddleware, createStore } from \"redux\";\nimport { IRootState, RootReducer } from \"./reducers\";\nimport logger from \"redux-logger\";\nimport thunk, { ThunkMiddleware } from \"redux-thunk\";\n\n\nexport const store = createStore(\n    RootReducer,\n    applyMiddleware(thunk as ThunkMiddleware<IRootState>, logger)\n);\n\n// redux-thunk\n\n// 1. 应用中间件\n// applyMiddleWare(thunk as ThunkMiddleWare<IRootState>)\n\n// 2. 创建 异步action\n// function deleteMovie(id: string)\n//     : ThunkAction<Promise<void>, IRootState, any, MovieActions> {\n//     return async (dispatch, getState) => {\n//         dispatch(createSetIsLoadingAction(true));\n//         await MovieService.deleteMovie(id);\n//         dispatch(createDeleteMovieAction(id));\n//         dispatch(createSetIsLoadingAction(false));\n//     }\n// }\n\n// 3. 触发action\n// store.dispatch(deleteMovie('id'));","import React from 'react';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter, Route } from 'react-router-dom';\nimport './App.css';\nimport Layout from './pages/Layout';\nimport { store } from './redux/store';\n\nfunction App() {\n  return (\n    <Provider store={store}>\n      <BrowserRouter>\n        <Route path=\"/\" component={Layout}></Route>\n      </BrowserRouter>\n    </Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'antd/dist/antd.css'\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// MovieService.addMovie({\n//   name: 'abc',\n//   timeLong: 0,\n//   types: [\"喜剧\"],\n//   areas: [\"大陆\"],\n//   isHot: true,\n//   isClassic: false,\n//   isComing: false,\n// }).then(res => {\n//   if(res.err) {\n//     console.log('发生错误', res);\n//     return;\n//   }\n//   console.log('成功', res);\n//  }, err => console.log('err', err));\n\n\n// MovieService.editMovie('6008f2fc593890c1afe13925',\n//   {\n//     name: '一个勺子',\n//     timeLong: 111,\n//     types: [\"喜剧\"],\n//     areas: [\"大陆\"],\n//     isHot: false,\n//     isClassic: true,\n//     isComing: false,\n//   }\n// ).then(res => {\n//   if (res.err) {\n//     console.log('发生错误', res);\n//     return;\n//   }\n//   const movie = res.data;\n//   console.log('成功', res);\n//   console.log('movie', movie);\n// }, err => console.log('err', err));\n\n// MovieService.deleteMovie('6008f2fc593890c1afe13925').then(res => {\n//   if (res.err) {\n//     console.log('发生错误', res);\n//     return;\n//   }\n//   console.log('成功', res);\n// }, err => console.log('err', err));\n\n// MovieService.getMovie('6008f2fc593890c1afe13925').then(res => {\n//   if (res.err) {\n//     console.log('发生错误', res);\n//     return;\n//   }\n//   const movie = res.data;\n//   console.log('成功', res);\n//   console.log('movie', movie);\n// }, err => console.log('err', err));\n\n\n\n// MovieService.getMovies({ limit: 5, page: 2, key: '电影名称' }).then(res => {\n//   if (res.err) {\n//     console.log('发生错误', res);\n//     return;\n//   }\n//   const movies = res.data;\n//   console.log('成功', res);\n//   console.log('movies', movies);\n// }, err => console.log('err', err));\n\n\n// store.subscribe(() => {\n//   console.log('监听器', store.getState());\n// })\n\n// store.dispatch(MovieAction.createSetIsLoadingAction(true));\n// store.dispatch(MovieAction.createSetIsLoadingAction(false));\n// store.dispatch(MovieAction.createSetConditionAction({\n//   page: 2\n// }));\n"],"sourceRoot":""}